# План автоматизации тестирования веб-сервиса "Путешествие дня".

## 1. Подготовка тестового окружения для работы SUT.

"Подготовка тестового окружения включает установку образов MySQL, Postgres, NodeJS в Docker Desktop; создание и настройку конфигурационных файлов; настройку и запуск сервиса gate-simulator."

## 2. Запуск SUT, анализ работы SUT в браузере, анализ работы SUT с СУБД.

## 3. Тестовые данные.

### Предоставленные для тестирования карты:

* 4444 4444 4444 4441, статус карты APPROVED
* 4444 4444 4444 4442, статус карты DECLINED

### Валидные значения полей форм:

**Поле "Номер карты":** формат ХХХХ ХХХХ ХХХХ ХХХХ, 16 символов, допустимы только цифры, данные предоставлены разработчиком."

**Поле "Месяц":** формат ХХ, 2 символа, допустимы только цифры, если год окончания срока действия карты текущий, значение "Месяц" не может быть меньше текущего месяца."

**Поле "Год":** формат ХХ, 2 символа, допустимы только цифры, последние две цифры года, значение "Год" не может быть меньше текущего."

**Поле "Владелец":** длина поля 1-27 символов, допустимы прописные буквы латинского алфавита, символ "-" и символ "."."

**Поле "CVC/CVV":** формат ХХХ, 3 символа, допустимы только цифры."

## 4. Тестирование поддержки работы с различными СУБД.
Тестирование поддержки работы сервиса с СУБД MySQL и Postgres осуществляется прогоном автотестов на соответствующей СУБД, выбор конкретной СУБД осуществляется параметрами запуска SUT из консоли и параметрами запуска сборки.

## 5. Перечень автоматизируемых сценариев.

#### Сценарии покупки тура оплатой по карте и покупке тура в кредит идентичны и отличаются только выбором соответствующей кнопки "Купить" или "Купить в кредит" на главной странице сервиса."

#### Выполнение любого сценария включает предварительные шаги:
 
1. Открыть в браузере страницу по адресу http://localhost:8080/.
2. Нажать кнопку "Купить" или кнопку "Купить в кредит", в зависимости от тестируемой функциональности.
3. Заполнить поля формы валидными значениями, тестируемое поле/поля заполняются согласно сценарию.

### *Позитивные сценарии.*

##### 1. Покупка тура по карте со статусом "APPROVED".

1.1 В поле "Номер карты" ввести "4444 4444 4444 4441".

1.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Текст на кнопке "Продолжить" поменялся на "Отправляем запрос в Банк...".
* В правом верхнем углу всплывает pop-up c текстом "Успешно" и ниже "Операция одобрена Банком".
* В БД в таблице payment_entry для сценария покупки по карте, в таблице credit_request_entity для сценария покупки в кредит, поле status  содержит значение "APPROVED".


##### 2. Покупка тура по карте со статусом "DECLINED".

2.1 В поле "Номер карты" ввести значение "4444 4444 4444 4442".

2.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Текст на кнопке "Продолжить" поменялся на "Отправляем запрос в Банк...".
* В правом верхнем углу всплывает pop-up c текстом "Ошибка" и ниже "Ошибка! Банк отказал в проведении операции".
* В БД в таблице payment_entry для сценария покупки по карте, в таблице credit_request_entity для сценария покупки в кредит, поле status  содержит значение "DECLINED".

### *Негативные сценарии.*

##### 3. Покупка тура, произвольный номер карты.

3.1 В поле "Номер карты" ввести значение "4444 4444 4444 4443".

3.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Текст на кнопке "Продолжить" поменялся на "Отправляем запрос в Банк...".
* В правом верхнем углу всплывает pop-up c текстом "Ошибка" и ниже "Ошибка! Банк отказал в проведении операции".
* В БД изменений нет.

##### 4. Покупка тура, поле "Номер карты" заполнено частично (1 символ)."

4.1. В поле "Номер карты" ввести значение "1".

4.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Номер карты" появляется запись красным шрифтом "Проверьте номер карты".

##### 5. Покупка тура, поле "Номер карты" заполнено частично (15 символов)."

5.1 В поле "Номер карты" ввести значение "4444 4444 4444 444".

5.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Номер карты" появляется запись красным шрифтом "Проверьте номер карты".

##### 6. Покупка тура, не валидный номер карты (16 нулей).

6.1 В поле "Номер карты" ввести значение "0000 0000 0000 0000".

6.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Номер карты" появляется запись красным шрифтом "Проверьте номер карты""

##### 7. Покупка тура, не валидный номер карты (поле не заполнено).

7.1 Очистить поле "Номер карты".

7.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

*Под полем "Номер карты" появляется запись красным шрифтом "Поле обязательно для заполнения".

##### 8. Покупка тура, не валидный номер карты (ввод спецсимвола).

8.1 В поле "Номер карты" ввести значение "4444 4444 4444 444$".

8.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Спецсимвол отсутствует в поле ввода. Под полем "Номер карты" появляется запись красным шрифтом "Проверьте номер карты".
* В БД изменений нет.

##### 9. Покупка тура, не валидный номер карты (ввод буквы).

9.1 В поле "Номер карты" ввести значение "4444 4444 4444 444f".

9.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Буква отсутствует в поле. Под полем "Номер карты" появляется запись красным шрифтом "Проверьте номер карты".

##### 10. Покупка тура, поле "Месяц" заполнено частично (1 символ)."

10.1 В поле "Месяц" ввести значение "1".

10.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Месяц" появляется запись красным шрифтом "Неверно указан срок действия карты".

##### 11. Покупка тура, поле "Месяц" заполнено не валидным значением (00)."

11.1 В поле "Месяц" ввести значение "00".

11.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Месяц" появляется запись красным шрифтом "Неверно указан срок действия карты".
* В БД изменений нет.

##### 12. Покупка тура, поле "Месяц" заполнено  значением больше 12."

12.1 В поле "Месяц" ввести значение "13".

12.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Месяц" появляется запись красным шрифтом "Неверно указан срок действия карты".

##### 13. Покупка тура, срок действия карты истек.

13.1 В поле "Месяц" ввести значение месяца на единицу меньше текущего."

13.2 В поле "Год" ввести две последние цифры текущего года или меньше."

13.3 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Год" появляется запись красным шрифтом "Срок действия карты истек".

##### 14. Покупка тура,  указанный срок действия карты превышает 5 лет.

14.1 В поле "Месяц" ввести значение месяца на единицу больше текущего.

14.2 В поле "Год" ввести последние две цифры года увеличенные на 6 или более.

14.3 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Год" появляется запись красным шрифтом "Не верно указан срок действия карты".

##### 15. Покупка тура,  ввод спецсимвола в поле "Месяц".

15.1 В поле "Месяц" ввести значение "1$".

15.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Месяц" появляется запись красным шрифтом "Не верно указан срок действия карты".

##### 16. Покупка тура,  ввод буквы в поле "Месяц".

16.1 В поле "Месяц" ввести значение "1f".

16.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Месяц" появляется запись красным шрифтом "Не верно указан срок действия карты".

##### 17. Покупка тура,  поле "Месяц" не заполнено."

17.1 Очистить поле "Месяц".

17.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Месяц" появляется запись красным шрифтом "Поле обязательно для заполнения".

##### 18. Покупка тура, поле "Год" заполнено не валидным значением (1 символ)."

18.1 В поле "Год" ввести значение "3".

18.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Год" появляется запись красным шрифтом "Не верно указан срок действия карты".

##### 19. Покупка тура, ввод буквы в поле "Год".

19.1 В поле "Год" ввести значение "2f".

19.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Год" появляется запись красным шрифтом "Не верно указан срок действия карты".

##### 20. Покупка тура, ввод спецсимвола в поле "Год".

20.1 В поле "Год" ввести значение "2$".

20.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Год" появляется запись красным шрифтом "Не верно указан срок действия карты".

##### 21. Покупка тура, поле "Год" не заполнено."

21.1 Очистить поле "Год".

21.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Год" появляется запись красным шрифтом "Поле обязательно для заполнения".

##### 22. Покупка тура оплатой по карте, поле "Владелец" заполнено не валидным значением (кириллица)."

22.1 Внести в поле "Владелец" фамилию и имя кириллическими  символами "ВАСИЛИЙ СИДОРОВ".

22.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Владелец" появляется запись красным шрифтом "Допустимы латинские символы, точка, дефис, апостроф".

##### 23. Покупка тура, поле "Владелец" заполнено не валидным значением (кириллические и латинские символы)."

23.1 Поле "Владелец" заполнить символами "IVANOV ИВАН".

23.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Владелец" появляется запись красным шрифтом" Допустимы латинские символы, точка, дефис, апостроф".

##### 24. Покупка тура, поле "Владелец" заполнено не валидным значением (имя содержит цифру)."

24.1 Поле "Владелец" заполнить символами "IVANOV IVAN5".

24.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Владелец" появляется запись красным шрифтом" Допустимы латинские символы, точка, дефис, апостроф".

##### 25. Покупка тура, поле "Владелец" заполнено не валидным значением (имя содержит спецсимвол)."

25.1 Поле "Владелец" заполнить символами "IVANOV IVAN$".

25.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Владелец" появляется запись красным шрифтом" Допустимы латинские символы, точка, дефис, апостроф".

##### 26. Покупка тура, поле "Владелец" заполнено одним словом, карта со статусом "APPROVED".

26.1 Поле "Владелец" заполнить символами "IVAN".

26.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Текст на кнопке "Продолжить" поменялся на "Отправляем запрос в Банк...".
* В правом верхнем углу всплывает pop-up c текстом "Успешно" и ниже "Операция одобрена Банком".
* В БД в таблице payment_entry для сценария покупки по карте, в таблице credit_request_entity для сценария покупки в кредит, поле status  содержит значение "APPROVED".

##### 27. Покупка тура, поле "Владелец" заполнено не валидным значением (больше 26 символов)."

27.1 Поле "Владелец" заполнить символами "TAMARA ZHEMCHUZHNAYA-IVANNIKOVA".

27.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Владелец" появляется запись красным шрифтом "Длина поля не может превышать 26 символов".

##### 28. Покупка тура, поле "Владелец" заполнено не валидным значением (менее 2 символов)."

28.1 Поле "Владелец" заполнить одним символом "T".

28.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Владелец" появляется запись красным шрифтом "Поле должно содержать не менее двух символов".

##### 29. Покупка тура, поле "Владелец" не заполнено."

29.1 Очистить поле "Владелец".

29.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "Владелец" появляется запись красным шрифтом "Поле обязательно для заполнения".

##### 30. Покупка тура, поле "Владелец" заполнено строчными буквами."

30.1 Поле "Владелец" заполнить символами "ivanov ivan".

30.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Текст на кнопке "Продолжить" поменялся на "Отправляем запрос в Банк...".
* В правом верхнем углу всплывает pop-up c текстом "Успешно" и ниже "Операция одобрена Банком".
* В БД в таблице payment_entry для сценария покупки по карте, в таблице credit_request_entity для сценария покупки в кредит, поле status  содержит значение "APPROVED".

##### 31. Покупка тура, поле "CVC/CVV" заполнено не валидным значением (2 цифры)."

31.1 В поле "CVC/CVV" ввести значение "71".

31.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "CVC/CVV" появляется запись красным шрифтом "Проверьте защитный код карты".

##### 32. Покупка тура, поле "CVC/CVV" заполнено не валидным значением (1 цифра)."

32.1 В поле "CVC/CVV" ввести значение "5".

32.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "CVC/CVV" появляется запись красным шрифтом "Проверьте защитный код карты".

##### 33. Покупка тура, поле "CVC/CVV" заполнено не валидным значением (содержит букву)."

33.1 В поле "CVC/CVV" ввести значение "35f".

33.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "CVC/CVV" появляется запись красным шрифтом "Проверьте защитный код карты".

##### 34. Покупка тура, поле "CVC/CVV" заполнено не валидным значением (содержит спецсимвол)."

34.1 В поле "CVC/CVV" ввести значение "35#".

34.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "CVC/CVV" появляется запись красным шрифтом "Проверьте защитный код карты".

##### 35. Покупка тура, поле "CVC/CVV" не заполнено."

35.1 Очистить поле "CVC/CVV".

35.2 Нажать кнопку "Продолжить".

###### Ожидаемый результат:

* Под полем "CVC/CVV" появляется запись красным шрифтом "Поле обязательно для заполнения".

### 6. Перечень планируемых к использованию инструментов.

* IntelliJ IDEA 2022.1.3 (Community Edition);"
* Java JDK liberica-11.0.15.1;"
* Docker Desktop 4.10.1;"
* DBeaver 22.1.2;"
* GitHub и GitHub Actions;"
* Google Chrome 03.0.5060.134;"

###### Инструменты интегрированные с IntelliJ IDEA:

* MySQL and PostgreSQL JDBC Driver's
* Apache Commons DbUtils
* Gradle - система автоматизации сборки;"
* JUnit5 - библиотека тестирования;"
* Lombok - библиотека кодогенерации;"
* Allure - построение отчетов по результатам автотестов;"
* Selenide - тестирование web-приложений;"
* Java Faker - генерация тестовых данных.

### 7. Перечень и описание возможных рисков при автоматизации.

- Автоматизация может быть не оправдана с точки зрения трудовых и финансовых затрат.
- Ошибки в автотестах, которые могут приводить к мнимому отсутствию и/или наличию дефектов.
- Сложности с запуском тестового окружения.
- Сложности поиска и написания локаторов для элементов страниц.
- Ошибки и сбои в работе ПО тестового окружения. Доступность сетевых сервисов.

### 8. Интервальная оценка с учётом рисков (в часах).

#### Общее предполагаемое количество времени для завершения проекта составляет 60 часов, в том числе:

- Подготовка тестового окружения, запуск и анализ SUT - 6 часов.
- Планирование автоматизации - 9 часов.
- Автоматизация тестирования и прогон автотестов - 30 часов.
- Подготовка отчетности по результатам прогона автотестов - 10 часов.
- Подготовка итоговой отчетности по результатам автоматизации - 5 часов.


### 9. План сдачи работ.

- 21.07.22 - 23.07.22 подготовка тестового окружения, запуск и анализ SUT;"
- 23.07.22 - планирование автоматизации;"
- 24.07.22 - 05.08.22 автоматизация тестирования и прогон автотестов;"
- 06.08.22 - 10.08.22 Подготовка отчетности по результатам прогона автотестов;"
- 11.08.22 - подготовка итоговой отчетности по результатам автоматизации;"
- 12.08.22 - сдача работы.
